{% extends "_base.html" %}
{% block content %}
  <div id = 'roundinfo' class = 'centerpadded-small bottom-margin'>
  <h1>Round stats:</h1>
    <h2>Match type: {{match.modes_string}}</h2>
    {% if match.data_version | float >= 1.1 %}
      <p>{{match.starttime|format_timestamp}} to {{match.endtime|format_timestamp}}</p>
    {% elif match.date %}
      <h3>Match date: {{match.date.strftime('%B %d %Y')}}</h3>
    {% endif %}
  </div>
  <div class = 'centerpadded'>
    <div class = 'gridcontainer'>
      <div id = 'antags' class = 'gridhalf'>
        <h3>Antag objectives:</h3>
      {% for antag in match.get_antags() %}
        <div class = 'antag'>
          <div id ='player'><span id = 'key'>{{antag.key}}</span><span id ='name'> as {{antag.name}}</span></div>
          <div id = 'actor'>{{antag.role}}</div>
          <ol>
          {% for objective in match.objs_for_antag(antag.key) %}
            <li class = 'objective'>
              {{objective | obj_pretty}} | {{ objective.objective_succeeded | obj_successfail | safe}}
            </li>
          {% endfor %}
          </ol>
        </div>
      {% endfor %}
      </div>
      <div id = 'deaths' class = 'gridhalf'>
      <h3>Deaths</h3>
      {%- for death in match.player_deaths() -%}
        <div class = 'matchdeath'>
          {% if death.mindkey -%}
            {{death.mindkey}} as
          {% endif -%}
          {{death.mindname}}
          {% if death.last_assailant -%}
            - Last assailant is {{death.last_assailant}}
          {% endif -%}
        </div>
      {% endfor %}
      </div>
    </div>
  </div>

{% endblock %}
